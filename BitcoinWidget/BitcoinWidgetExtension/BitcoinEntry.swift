//
//  BitcoinEntry.swift
//  BitcoinWidget
//
//  Created by 김건우 on 3/31/24.
//

import WidgetKit

// ⭐️ TimelineEntry 프로토콜은 date 프로퍼티를 구현
// date 프로퍼티는 위젯을 업데이트할 시간을 의미
struct BitcoinEntry: TimelineEntry, Decodable {
    var date: Date = Date()
    let currentPrice: Double
    let priceChangePercentage24h: Double
    let sparkline: SparkLine
    
    enum CodingKeys: String, CodingKey {
        case currentPrice = "current_price"
        case priceChangePercentage24h = "price_change_percentage_24h"
        case sparkline = "sparkline_in_7d"
    }
    
    init() {
        self.date = Date()
        self.currentPrice = 12345.0 // Sample Data
        self.priceChangePercentage24h = 6.78 // Sample Data
        self.sparkline = SparkLine() // Sample Data
    }
}

struct SparkLine: Decodable {
    let price: [Double]
    
    enum CodingKeys: String, CodingKey {
        case price
    }
    
    init() {
        // Sample Data
        self.price = [
            70199.82756395357,
            70438.06752742469,
            69835.74921846428,
            69956.42149624269,
            69734.6751734077,
            70111.5770534737,
            70171.54038889699,
            70166.73684073053,
            70451.71366168032,
            70088.60655328099,
            69310.17294396741,
            69200.5534515082,
            69432.58774240862,
            69496.38370749578,
            69671.7817568704,
            69592.1247935203,
            69453.81174154938,
            69928.194964586,
            69906.3601516673,
            69879.08177375929,
            70000.33924835018,
            69946.62566419902,
            69876.50773092965,
            70342.62825199634,
            69993.69822343232,
            69965.52751036559,
            69909.62947172619, 
            69966.6849975713,
            70054.85964219787,
            70141.46168819138,
            70212.70191019075,
            70290.04906804294,
            70179.01485359542,
            70134.3825664161,
            70041.06744242588,
            70207.92254323962,
            70059.88258540482,
            69887.96590049165,
            69888.20736567445,
            69846.36521695401,
            69762.82560475214,
            69744.13074270339,
            69622.30923369367,
            69872.59826390781,
            70055.51523593791,
            69996.88476668348,
            69917.22342623175,
            70129.97891203023,
            70352.19587638557,
            70219.2236140398,
            70325.97653406506,
            70244.13468115508,
            70258.989943178,
            70342.80281528807,
            70418.0518099381,
            70564.9435693011,
            70602.6300346646,
            70471.71664438462,
            70391.97904093297,
            70459.72812439363,
            70505.175341413,
            70755.51331159186,
            71095.96494214122,
            70833.205560557,
            70787.5565487249,
            70932.19761892733,
            71229.87655843626,
            71087.25098030263,
            70854.60005957093,
            70877.82737240873,
            70619.47504803985,
            70450.85253074118,
            69236.61393631532,
            69686.6032574771,
            69522.45722667436,
            69433.17938185587,
            69439.14582052667,
            69614.25770884354,
            69505.77873187968,
            69771.22027973064,
            69716.7387720348,
            68613.05627372122,
            68368.60320757983,
            68647.15823839215,
            68548.97411085614,
            68984.68530295773,
            69617.79569684096,
            69773.77492380183,
            69701.60145938995,
            69770.20184774762,
            69609.57814998928,
            69394.5437783541,
            69320.06902054936,
            67176.10136218855,
            66933.85310279732,
            66671.39910443817,
            66862.4215085759,
            66936.30151190482,
            66546.36940230262,
            65855.38101245622,
            66128.45638286824,
            65868.6789275122,
            65509.00792365257,
            65319.4841988721,
            65069.14840403641,
            65682.12440219843,
            65075.587301571795,
            65575.63144062112,
            65528.738122162395,
            65867.48770254257,
            66122.2927223462,
            65673.8967241405,
            65710.53567781566,
            65773.80242597149,
            65534.30491580929,
            65361.58666035539,
            65862.7951120461,
            65816.56429769016,
            66220.29156494063,
            66311.19445004368,
            66168.26565312546,
            66287.9020179715,
            66120.84938255069,
            66537.5720223001,
            66459.67293437496,
            66112.43335472258,
            66092.90219264042,
            65964.2296585029,
            65831.28602966432,
            66604.75744540128,
            65866.7598419646,
            66183.96012117567,
            65840.13660777804,
            66044.01653029339,
            65828.98237712019,
            65714.2207783053,
            65988.3056752151,
            66212.36390036279,
            66103.92369277785,
            66282.96477205383,
            66153.3532735734,
            65814.7986952181,
            65698.28348738086,
            65536.53608747096,
            65619.9905509694,
            65800.60278272994,
            66055.60832695603,
            66353.25203442888,
            66282.405411214,
            66258.70283762734,
            66336.89383199692,
            66601.96670974715,
            67260.32176218054,
            67712.62756628517,
            67638.05459456639,
            67806.33511837569,
            69199.13410727492,
            68628.86092664195,
            68472.36076999798,
            68007.87196715942,
            67748.48962178483,
            67933.71324422375,
            68542.17715279506,
            68679.19667510383,
            68144.73893823204,
            67705.81319113576,
            67888.97940549186,
            67725.98432504019
        ]
    }
}
